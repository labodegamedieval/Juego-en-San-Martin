<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ° El enigma de Gonzalo de la Sierra</title>
  <link rel="stylesheet" href="styles/style.css"/>
  <link rel="icon" type="image/png" href="images/icon-192.png"/>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GE0YB9PL8Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GE0YB9PL8Q');
  </script>

  <style>
    body {
      background: url('images/pergamino.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Georgia', serif;
      color: #3b241b;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: rgba(255, 248, 228, 0.95);
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }

    header h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }

    .music-control, .language-select {
      text-align: center;
      margin-bottom: 20px;
    }

    .music-btn {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #d6c1a1;
      border: 2px solid #6d4c41;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Georgia', serif;
    }

    .music-btn:hover {
      background-color: #cfb68a;
    }

    #selector-idioma {
      padding: 8px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #999;
      background-color: white;
      font-family: 'Georgia', serif;
    }

    /* Carrusel principal */
    .carousel-container {
      position: relative;
      max-width: 100%;
      overflow: hidden;
      margin: 20px auto;
      border-radius: 12px;
      border: 3px solid #5a3b2b;
    }

    .carousel-slide {
      display: flex;
      transition: transform 0.5s ease;
    }

    .carousel-item {
      min-width: 100%;
      box-sizing: border-box;
      padding: 10px;
      text-align: center;
    }

    .carousel-item img {
      width: 100%;
      border-radius: 10px;
      max-height: 400px;
      object-fit: cover;
    }

    .carousel-text {
      margin-top: 10px;
      font-style: italic;
      font-size: 16px;
    }

    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0,0,0,0.6);
      color: white;
      border: none;
      border-radius: 50%;
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-btn:hover {
      background-color: rgba(0,0,0,0.8);
    }

    #prevBtn { left: 10px; }
    #nextBtn { right: 10px; }

    h2 {
      margin-top: 30px;
      font-size: 1.5em;
      color: #3b241b;
    }

    ol {
      margin-left: 20px;
      margin-bottom: 20px;
    }

    ol li {
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .info-extra {
      font-style: italic;
      background-color: #f6efe0;
      padding: 15px;
      border-left: 5px solid #6d4c41;
      margin-bottom: 30px;
      border-radius: 8px;
    }

    #nombre-jugador {
      margin: 20px 0;
      text-align: center;
    }

    input[type="text"] {
      padding: 8px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #999;
      width: 70%;
      max-width: 300px;
      margin: 10px 0;
    }

    .action-btn {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #d6c1a1;
      border: 2px solid #6d4c41;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Georgia', serif;
    }

    .action-btn:hover {
      background-color: #cfb68a;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 30px;
    }

    .button-group button {
      padding: 14px 24px;
      font-size: 18px;
      background-color: #e2c79c;
      border: 2px solid #5a3b2b;
      border-radius: 10px;
      cursor: pointer;
      font-family: 'Georgia', serif;
      transition: 0.3s;
    }

    .button-group button:hover {
      background-color: #cfb68a;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      font-style: italic;
    }

    footer a {
      color: #5a3b2b;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 20px;
        margin: 10px;
      }

      header h1 {
        font-size: 1.5em;
      }

      .button-group button {
        padding: 12px 18px;
        font-size: 16px;
      }

      input[type="text"] {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <!-- Carrusel principal -->
  <div class="carousel-container">
    <div class="carousel-slide" id="carousel-slide">
      <div class="carousel-item">
        <img src="images/portada.jpg" alt="San MartÃ­n del CastaÃ±ar" />
        <p class="carousel-text" id="slide-text-1">San MartÃ­n del CastaÃ±ar, un pueblo medieval que esconde un secreto que solo los mÃ¡s curiosos pueden descubrir... Â¿te atreves?</p>
      </div>
      <div class="carousel-item">
        <img src="images/gonzalo.jpg" alt="Gonzalo de la Sierra" />
        <p class="carousel-text" id="slide-text-2">Gonzalo de la Sierra, antiguo bodeguero del siglo XVI, desapareciÃ³ sin dejar rastro. Pero dejÃ³ un mensaje oculto entre los rincones del pueblo. Busca los fragmentos, sigue las pistas y descubre el enigma.</p>
      </div>
      <div class="carousel-item">
        <img src="images/mapa-san-martin.jpg" alt="Mapa del Pueblo" />
        <p class="carousel-text" id="slide-text-3">Visita cada parada, supera los retos, escanea el QR... y si llegas al final, desvelarÃ¡s el secreto oculto.</p>
      </div>
    </div>

    <button class="carousel-btn" id="prevBtn">â®</button>
    <button class="carousel-btn" id="nextBtn">â¯</button>
  </div>
  
  <div class="container">
    <header>
      <h1 id="titulo">ğŸ° El enigma de Gonzalo de la Sierra</h1>
      <div class="music-control">
        <button class="music-btn" onclick="toggleMusic()">ğŸµ MÃºsica</button>
      </div>
      <div class="language-select">
        <label for="selector-idioma">ğŸŒ Idioma:</label>
        <select id="selector-idioma">
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
        </select>
      </div>
    </header>

    <section>
      <h2 id="como">ğŸ§¾ Â¿CÃ³mo funciona el juego?</h2>
      <ol id="lista-como">
        <li>Activa el GPS, los datos de tu mÃ³vil y recorre el pueblo. Â¡No hace falta descargar nada!</li>
        <li>En EXPLORAR, visita las 6 paradas del mapa y supera los retos en cada una. En CRONICA puedes ver tu progreso y los fragmentos del mensaje. No hay orden pero yo empezarÃ­a por el castillo :)</li>
        <li>Busca y escanea el QR oculto en cada parada para descubrir una pista del misterio.</li>
        <li>Solo si completas las 6 paradas del mapa, podrÃ¡s desvelar cuÃ¡l es la parada final y descubrir el misterio de la desapariciÃ³n de Gonzalo.</li>
      </ol>

      <div class="info-extra" id="info-extra">
        ğŸ® Este juego es <strong>gratuito</strong> y pensado como una forma divertida de conocer este pueblo tan peculiar y lleno de historia.<br><br>ğŸ’¡ Se trata de una <strong>iniciativa privada</strong>, sin financiaciÃ³n pÃºblica, creada por emprendedores que buscan mejorar la experiencia turÃ­stica de quienes nos visitan.
      </div>

      <div id="nombre-jugador">
        <h2 id="antes">ğŸ“ Antes de comenzar...</h2>
        <p id="introduce">Introduce tu nombre o apodo para registrar tu progreso:</p>
        <input type="text" id="nombre-input" placeholder="Ej: Valiente123" />
        <br>
        <button class="action-btn" onclick="guardarNombreJugador()" id="btnGuardar">Guardar y Empezar</button>
      </div>

      <div class="button-group">
        <button onclick="window.location.href='explorar.html'">ğŸ—ºï¸ Explorar</button>
        <button onclick="window.location.href='guia.html'">ğŸ“– GuÃ­a HistÃ³rica</button>
        <button onclick="window.location.href='cronica.html'">ğŸ“œ CrÃ³nica</button>
        <button onclick="window.location.href='ranking.html'">ğŸ† Ranking</button>
      </div>
    </section>

    <audio id="background-music" loop>
      <source src="sounds/musica-medieval.mp3" type="audio/mpeg" />
    </audio>

    <footer>
      <p>
        Â© Made with love by La Bodega Medieval 2025 |
        <a href="https://www.labodegamedieval.es" target="_blank">Reserva tu Experiencia</a>
      </p>
    </footer>
  </div>

  <script>
    // Textos para diferentes idiomas
    const textos = {
      es: {
        titulo: "ğŸ° El enigma de Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, un pueblo medieval que esconde un secreto que solo los mÃ¡s curiosos pueden descubrir... Â¿te atreves?",
        slide2: "Gonzalo de la Sierra, antiguo bodeguero del siglo XVI, desapareciÃ³ sin dejar rastro. Pero dejÃ³ un mensaje oculto entre los rincones del pueblo. Busca los fragmentos, sigue las pistas y descubre el enigma.",
        slide3: "Visita cada parada, supera los retos, escanea el QR... y si llegas al final, desvelarÃ¡s el secreto oculto.",
        como: "ğŸ§¾ Â¿CÃ³mo funciona el juego?",
        lista: [
          "Activa el GPS, los datos de tu mÃ³vil y recorre el pueblo. Â¡No hace falta descargar nada!",
          "En EXPLORAR, visita las 6 paradas del mapa y supera los retos en cada una. En CRONICA puedes ver tu progreso y los fragmentos del mensaje. No hay orden pero yo empezarÃ­a por el castillo :)",
          "Busca y escanea el QR oculto en cada parada para descubrir una pista del misterio.",
          "Solo si completas las 6 paradas del mapa, podrÃ¡s desvelar cuÃ¡l es la parada final y descubrir el misterio de la desapariciÃ³n de Gonzalo."
        ],
        info: "ğŸ® Este juego es <strong>gratuito</strong> y pensado como una forma divertida de conocer este pueblo tan peculiar y lleno de historia.<br><br>ğŸ’¡ Se trata de una <strong>iniciativa privada</strong>, sin financiaciÃ³n pÃºblica, creada por emprendedores que buscan mejorar la experiencia turÃ­stica de quienes nos visitan.",
        antes: "ğŸ“ Antes de comenzar...",
        introduce: "Introduce tu nombre o apodo para registrar tu progreso:",
        btnGuardar: "Guardar y Empezar",
        btnExplorar: "ğŸ—ºï¸ Explorar",
        btnGuia: "ğŸ“– GuÃ­a HistÃ³rica",
        btnCronica: "ğŸ“œ CrÃ³nica",
        btnRanking: "ğŸ† Ranking"
      },
      fr: {
        titulo: "ğŸ° L'Ã©nigme de Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, un village mÃ©diÃ©val qui cache un secret que seuls les plus curieux peuvent dÃ©couvrir... Oserez-vous tenter l'aventure ?",
        slide2: "Gonzalo de la Sierra, ancien vigneron du XVIe siÃ¨cle, a disparu sans laisser de trace. Mais il a laissÃ© un message cachÃ© dans les recoins du village. Cherche les fragments, suis les indices et dÃ©couvre l'Ã©nigme.",
        slide3: "Visite chaque Ã©tape, relÃ¨ve les dÃ©fis, scanne le QR... et si tu arrives jusqu'au bout, tu rÃ©vÃ©leras le secret cachÃ©.",
        como: "ğŸ§¾ Comment fonctionne le jeu ?",
        lista: [
          "Active le GPS, les donnÃ©es de ton mobile et explore le village. Pas besoin de tÃ©lÃ©charger quoi que ce soit !",
          "Dans EXPLORER, visite les 6 Ã©tapes sur la carte et relÃ¨ve les dÃ©fis dans chacune. Dans CHRONIQUE, tu peux voir ta progression et les fragments du message. Il n'y a pas d'ordre prÃ©cis, mais je commencerais par le chÃ¢teau :)",
          "Cherche et scanne le QR cachÃ© Ã  chaque Ã©tape pour dÃ©couvrir un indice du mystÃ¨re.",
          "Ce n'est qu'en complÃ©tant les 6 Ã©tapes de la carte que tu pourras rÃ©vÃ©ler quelle est l'Ã©tape finale et dÃ©couvrir le mystÃ¨re de la disparition de Gonzalo."
        ],
        info: "ğŸ® Ce jeu est <strong>gratuit</strong> et conÃ§u comme un moyen amusant de dÃ©couvrir ce village si particulier et plein d'histoire.<br><br>ğŸ’¡ Il s'agit d'une <strong>initiative privÃ©e</strong>, sans financement public, crÃ©Ã©e par des entrepreneurs qui souhaitent enrichir l'expÃ©rience touristique de nos visiteurs.",
        antes: "ğŸ“ Avant de commencer...",
        introduce: "Entre ton nom ou ton pseudo pour enregistrer ta progression :",
        btnGuardar: "Enregistrer et Commencer",
        btnExplorar: "ğŸ—ºï¸ Explorer",
        btnGuia: "ğŸ“– Guide Historique",
        btnCronica: "ğŸ“œ Chronique",
        btnRanking: "ğŸ† Classement"
      },
      en: {
        titulo: "ğŸ° The Enigma of Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, a medieval village that hides a secret only the most curious can uncover... dare to try?",
        slide2: "Gonzalo de la Sierra, a 16th-century winemaker, vanished without a trace. But he left a hidden message among the village's corners. Search for the fragments, follow the clues, and solve the enigma.",
        slide3: "Visit each stop, complete the challenges, scan the QR... and if you reach the end, you will uncover the hidden secret.",
        como: "ğŸ§¾ How does the game work?",
        lista: [
          "Enable GPS and mobile data, and walk around the village. No downloads required!",
          "In EXPLORE, visit the 6 stops on the map and complete the challenges at each one. In CHRONICLE, you can track your progress and view the message fragments. There's no set order, but I'd start with the castle :)",
          "Find and scan the hidden QR at each stop to discover a clue to the mystery.",
          "Only if you complete all 6 stops on the map will the final stop be revealed â€” and the mystery of Gonzalo's disappearance solved."
        ],
        info: "ğŸ® This game is <strong>free</strong> and designed as a fun way to explore this unique and historic village.<br><br>ğŸ’¡ It's a <strong>private initiative</strong>, without public funding, created by entrepreneurs aiming to enhance the visitor experience.",
        antes: "ğŸ“ Before you begin...",
        introduce: "Enter your name or nickname to track your progress:",
        btnGuardar: "Save and Start",
        btnExplorar: "ğŸ—ºï¸ Explore",
        btnGuia: "ğŸ“– Historical Guide",
        btnCronica: "ğŸ“œ Chronicle",
        btnRanking: "ğŸ† Ranking"
      },
      de: {
        titulo: "ğŸ° Das RÃ¤tsel von Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, ein mittelalterliches Dorf, das ein Geheimnis verbirgt, das nur die Neugierigsten entdecken kÃ¶nnen... wagst du es?",
        slide2: "Gonzalo de la Sierra, ein Winzer aus dem 16. Jahrhundert, verschwand spurlos. Doch er hinterlieÃŸ eine Botschaft, versteckt in den Ecken des Dorfes. Suche die Fragmente, folge den Hinweisen und lÃ¶se das RÃ¤tsel.",
        slide3: "Besuche jede Station, meistere die Herausforderungen, scanne den QR-Code... und wenn du bis zum Ende kommst, wirst du das verborgene Geheimnis lÃ¼ften.",
        como: "ğŸ§¾ Wie funktioniert das Spiel?",
        lista: [
          "Aktiviere GPS und mobile Daten, und erkunde das Dorf. Kein Download erforderlich!",
          "In ERKUNDEN besuchst du die 6 Stationen auf der Karte und bewÃ¤ltigst die jeweiligen Herausforderungen. In CHRONIK kannst du deinen Fortschritt und die Nachrichtenfragmente sehen. Es gibt keine feste Reihenfolge, aber ich wÃ¼rde mit der Burg beginnen :)",
          "Suche und scanne an jeder Station den versteckten QR-Code, um einen Hinweis auf das Geheimnis zu erhalten.",
          "Nur wenn du alle 6 Stationen auf der Karte absolvierst, wird die letzte Station enthÃ¼llt â€” und das RÃ¤tsel um Gonzalos Verschwinden gelÃ¶st."
        ],
        info: "ğŸ® Dieses Spiel ist <strong>kostenlos</strong> und wurde als unterhaltsame MÃ¶glichkeit entwickelt, dieses besondere und geschichtstrÃ¤chtige Dorf kennenzulernen.<br><br>ğŸ’¡ Es handelt sich um eine <strong>private Initiative</strong> ohne Ã¶ffentliche Finanzierung, ins Leben gerufen von Unternehmern, die das touristische Erlebnis verbessern mÃ¶chten.",
        antes: "ğŸ“ Bevor du beginnst...",
        introduce: "Gib deinen Namen oder Spitznamen ein, um deinen Fortschritt zu speichern:",
        btnGuardar: "Speichern und Starten",
        btnExplorar: "ğŸ—ºï¸ Erkunden",
        btnGuia: "ğŸ“– Historischer Leitfaden",
        btnCronica: "ğŸ“œ Chronik",
        btnRanking: "ğŸ† Rangliste"
      }
    };

    // Variables para el carrusel
    let currentIndex = 0;
    const slide = document.getElementById("carousel-slide");
    const totalSlides = slide.children.length;

    // FunciÃ³n para aplicar el idioma
    function aplicarIdioma() {
      const idioma = localStorage.getItem("idioma") || "es";
      const t = textos[idioma];
      
      // Actualizar elementos del HTML
      document.getElementById("titulo").innerText = t.titulo;
      document.getElementById("slide-text-1").innerText = t.slide1;
      document.getElementById("slide-text-2").innerText = t.slide2;
      document.getElementById("slide-text-3").innerText = t.slide3;
      document.getElementById("como").innerText = t.como;
      
      // Actualizar lista
      const lista = document.getElementById("lista-como");
      lista.innerHTML = "";
      t.lista.forEach(item => {
        const li = document.createElement("li");
        li.textContent = item;
        lista.appendChild(li);
      });
      
      document.getElementById("info-extra").innerHTML = t.info;
      document.getElementById("antes").innerText = t.antes;
      document.getElementById("introduce").innerText = t.introduce;
      document.getElementById("btnGuardar").innerText = t.btnGuardar;
      
      // Actualizar botones del grupo
      const botones = document.querySelectorAll(".button-group button");
      botones[0].innerText = t.btnExplorar;
      botones[1].innerText = t.btnGuia;
      botones[2].innerText = t.btnCronica;
      botones[3].innerText = t.btnRanking;
      
      // Actualizar selector de idioma
      document.getElementById("selector-idioma").value = idioma;
    }

    // FunciÃ³n para guardar nombre del jugador
    function guardarNombreJugador() {
      const nombre = document.getElementById("nombre-input").value.trim();
      if (nombre.length >= 3) {
        localStorage.setItem("jugador", nombre);
        document.getElementById("nombre-jugador").style.display = "none";
        
        // Google Analytics
        if (typeof gtag !== 'undefined') {
          gtag('event', 'jugador_inicio', {
            'event_category': 'Juego',
            'event_label': nombre
          });
        }
      } else {
        alert("Por favor, escribe al menos 3 caracteres.");
      }
    }

    // FunciÃ³n para controlar mÃºsica
    function toggleMusic() {
      const music = document.getElementById("background-music");
      const btn = document.querySelector(".music-btn");
      
      if (music.paused) {
        music.play().catch(e => {
          console.log("No se puede reproducir la mÃºsica automÃ¡ticamente");
        });
        btn.innerText = "ğŸµ Pausar MÃºsica";
      } else {
        music.pause();
        btn.innerText = "ğŸµ Reanudar MÃºsica";
      }
    }

    // Funciones del carrusel
    function updateCarousel() {
      slide.style.transform = `translateX(${-currentIndex * 100}%)`;
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      updateCarousel();
    }

    function prevSlide() {
      currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
      updateCarousel();
    }

    // InicializaciÃ³n cuando se carga la pÃ¡gina
    document.addEventListener("DOMContentLoaded", () => {
      aplicarIdioma();
      
      // Ocultar secciÃ³n de nombre si ya existe
      if (localStorage.getItem("jugador")) {
        document.getElementById("nombre-jugador").style.display = "none";
      }

      // Event listeners
      document.getElementById("selector-idioma").addEventListener("change", (e) => {
        localStorage.setItem("idioma", e.target.value);
        aplicarIdioma();
      });

      document.getElementById("nextBtn").addEventListener("click", nextSlide);
      document.getElementById("prevBtn").addEventListener("click", prevSlide);

      // Carrusel automÃ¡tico (opcional)
      setInterval(nextSlide, 5000);
    });
  </script>
</body>
</html>
