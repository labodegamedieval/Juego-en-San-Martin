<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ° El enigma de Gonzalo de la Sierra</title>
  <link rel="stylesheet" href="styles/style.css"/>
  <link rel="icon" type="image/png" href="images/icon-192.png"/>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GE0YB9PL8Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GE0YB9PL8Q');
  </script>

  <style>
    body {
      background: url('images/pergamino.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Georgia', serif;
      color: #3b241b;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: rgba(255, 248, 228, 0.95);
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }

    header h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }

    .music-control, .language-select {
      text-align: center;
      margin-bottom: 20px;
    }

    .carousel {
      position: relative;
      text-align: center;
      margin-bottom: 20px;
    }

    .carousel img {
      width: 100%;
      border-radius: 12px;
      border: 3px solid #5a3b2b;
    }

    .carousel p {
      margin-top: 10px;
      font-style: italic;
    }

    .carousel-btn {
      position: absolute;
      top: 40%;
      transform: translateY(-50%);
      background-color: rgba(255,255,255,0.8);
      border: none;
      font-size: 20px;
      cursor: pointer;
      padding: 10px;
      border-radius: 50%;
    }

    .carousel-btn.prev-slide { left: 10px; }
    .carousel-btn.next-slide { right: 10px; }

    h2 {
      margin-top: 30px;
      font-size: 1.5em;
    }

    ol {
      margin-left: 20px;
      margin-bottom: 20px;
    }

    .info-extra {
      font-style: italic;
      background-color: #f6efe0;
      padding: 15px;
      border-left: 5px solid #6d4c41;
      margin-bottom: 30px;
      border-radius: 8px;
    }

    input[type="text"] {
      padding: 8px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #999;
      width: 70%;
      max-width: 300px;
    }

    .action-btn {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #d6c1a1;
      border: 2px solid #6d4c41;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Georgia', serif;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 30px;
    }

    .button-group button {
      padding: 14px 24px;
      font-size: 18px;
      background-color: #e2c79c;
      border: 2px solid #5a3b2b;
      border-radius: 10px;
      cursor: pointer;
      font-family: 'Georgia', serif;
      transition: 0.3s;
    }

    .button-group button:hover {
      background-color: #cfb68a;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1 id="titulo"></h1>
      <div class="music-control">
        <button class="music-btn" onclick="toggleMusic()">ğŸµ MÃºsica</button>
      </div>
      <div class="language-select">
        <label for="selector-idioma">ğŸŒ Idioma:</label>
        <select id="selector-idioma">
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
        </select>
      </div>
    </header>

    <section>
      <div class="carousel">
        <div class="slide active">
          <img src="images/portada.jpg" alt="San MartÃ­n del CastaÃ±ar" />
          <p id="slide1"></p>
        </div>
        <div class="slide">
          <img src="images/gonzalo.jpg" alt="Gonzalo de la Sierra" />
          <p id="slide2"></p>
        </div>
        <div class="slide">
          <img src="images/mapa-san-martin.jpg" alt="Mapa del Pueblo" />
          <p id="slide3"></p>
        </div>
        <button class="carousel-btn prev-slide">â†</button>
        <button class="carousel-btn next-slide">â†’</button>
      </div>

      <h2 id="como"></h2>
      <ol id="lista-como"></ol>

      <div class="info-extra" id="info-extra"></div>

      <div id="nombre-jugador" style="margin: 20px 0;">
        <h2 id="antes"></h2>
        <p id="introduce"></p>
        <input type="text" id="nombre-input" placeholder="Ej: Valiente123" />
        <br>
        <button class="action-btn" onclick="guardarNombreJugador()" id="btnGuardar"></button>
      </div>

      <div class="button-group">
        <button onclick="window.location.href='explorar.html'">ğŸ—˜ï¸ Explorar</button>
        <button onclick="window.location.href='guia.html'">ğŸ“– GuÃ­a HistÃ³rica</button>
        <button onclick="window.location.href='cronica.html'">ğŸ“œ CrÃ³nica</button>
        <button onclick="window.location.href='ranking.html'">ğŸ† Ranking</button>
      </div>
    </section>

    <audio id="background-music" loop autoplay>
      <source src="sounds/musica-medieval.mp3" type="audio/mpeg" />
    </audio>

    <footer>
      <p>
        Â© Made with love by La Bodega Medieval 2025 |
        <a href="https://www.labodegamedieval.es" target="_blank">Reserva tu Experiencia</a>
      </p>
    </footer>
  </div>

  <script>
    const textos = {
      es: {
        titulo: "ğŸ° El enigma de Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, un pueblo medieval que esconde un secreto que solo los mÃ¡s curiosos pueden descubrir... Â¿te atreves?",
        slide2: "Gonzalo de la Sierra, antiguo bodeguero del siglo XVI, desapareciÃ³ sin dejar rastro. Pero dejÃ³ un mensaje oculto entre los rincones del pueblo. Busca los fragmentos, sigue las pistas y descubre el enigma.",
        slide3: "Visita cada parada, supera los retos, escanea el QR... y desvela el secreto oculto.",
        como: "ğŸ§¾ Â¿CÃ³mo funciona el juego?",
        lista: [
          "Activa el GPS, los datos de tu mÃ³vil y recorre el pueblo. Â¡No hace falta descargar nada!",
          "Visita las 6 paradas y supera los retos en cada una.",
          "Escanea el QR en cada lugar para descubrir una pista del mensaje.",
          "Solo si completas todas las paradas, podrÃ¡s desvelar la parada final y descubrir el misterio de la desapariciÃ³n de Gonzalo."
        ],
        info: "ğŸ® Este juego es <strong>gratuito</strong> y pensado como una forma divertida de conocer este pueblo tan peculiar y lleno de historia.<br><br>ğŸ’¡ Se trata de una <strong>iniciativa privada</strong>, sin financiaciÃ³n pÃºblica, creada por emprendedores que buscan mejorar la experiencia turÃ­stica de quienes nos visitan.",
        antes: "ğŸ“ Antes de comenzar...",
        introduce: "Introduce tu nombre o apodo para registrar tu progreso:",
        btnGuardar: "Guardar y Empezar",
        btnExplorar: "ğŸ—ºï¸ Explorar",
        btnGuia: "ğŸ“– GuÃ­a HistÃ³rica",
        btnCronica: "ğŸ“œ CrÃ³nica",
        btnRanking: "ğŸ† Ranking"
      },
      en: {
        titulo: "ğŸ° Gonzalo de la Sierra's Enigma",
        slide1: "San MartÃ­n del CastaÃ±ar, a medieval village hiding a secret only the curious can uncover... dare you?",
        slide2: "Gonzalo de la Sierra, a 16th-century winemaker, vanished mysteriously. But he left a hidden message scattered around the village. Find the fragments, follow the clues, and solve the enigma.",
        slide3: "Visit each stop, complete the challenges, scan the QR... and reveal the hidden secret.",
        como: "ğŸ§¾ How does the game work?",
        lista: [
          "Activate your GPS and mobile data and explore the village. No downloads needed!",
          "Visit the 6 stops and complete each challenge.",
          "Scan the QR code at each location to discover a message fragment.",
          "Only after completing all the stops will you unlock the final location and solve the mystery of Gonzalo's disappearance."
        ],
        info: "ğŸ® This game is <strong>free</strong> and designed as a fun way to discover this unique and historic village.<br><br>ğŸ’¡ It's a <strong>private initiative</strong>, without public funding, created by local entrepreneurs to enhance the visitor experience.",
        antes: "ğŸ“ Before you begin...",
        introduce: "Enter your name or nickname to track your progress:",
        btnGuardar: "Save and Start",
        btnExplorar: "ğŸ—ºï¸ Explore",
        btnGuia: "ğŸ“– Historical Guide",
        btnCronica: "ğŸ“œ Chronicle",
        btnRanking: "ğŸ† Ranking"
      },
      fr: {
        titulo: "ğŸ° L'Ã©nigme de Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, un village mÃ©diÃ©val qui cache un secret que seuls les plus curieux peuvent dÃ©couvrir... Oserez-vous ?",
        slide2: "Gonzalo de la Sierra, ancien vigneron du XVIe siÃ¨cle, a disparu sans laisser de trace. Mais il a laissÃ© un message cachÃ© dans les recoins du village. Trouvez les fragments, suivez les indices et rÃ©solvez l'Ã©nigme.",
        slide3: "Visitez chaque arrÃªt, relevez les dÃ©fis, scannez le QR... et rÃ©vÃ©lez le secret cachÃ©.",
        como: "ğŸ§¾ Comment fonctionne le jeu ?",
        lista: [
          "Activez le GPS et les donnÃ©es de votre mobile, puis explorez le village. Aucun tÃ©lÃ©chargement nÃ©cessaire !",
          "Visitez les 6 arrÃªts et relevez les dÃ©fis Ã  chaque endroit.",
          "Scannez le QR code Ã  chaque lieu pour dÃ©couvrir un fragment du message.",
          "Ce n'est qu'en complÃ©tant toutes les Ã©tapes que vous dÃ©couvrirez l'arrÃªt final et percerez le mystÃ¨re de la disparition de Gonzalo."
        ],
        info: "ğŸ® Ce jeu est <strong>gratuit</strong> et conÃ§u comme un moyen ludique de dÃ©couvrir ce village plein d'histoire.<br><br>ğŸ’¡ C'est une <strong>initiative privÃ©e</strong>, sans financement public, crÃ©Ã©e par des entrepreneurs locaux pour enrichir l'expÃ©rience touristique.",
        antes: "ğŸ“ Avant de commencer...",
        introduce: "Entrez votre nom ou surnom pour enregistrer vos progrÃ¨s :",
        btnGuardar: "Enregistrer et commencer",
        btnExplorar: "ğŸ—ºï¸ Explorer",
        btnGuia: "ğŸ“– Guide Historique",
        btnCronica: "ğŸ“œ Chronique",
        btnRanking: "ğŸ† Classement"
      },
      de: {
        titulo: "ğŸ° Das RÃ¤tsel von Gonzalo de la Sierra",
        slide1: "San MartÃ­n del CastaÃ±ar, ein mittelalterliches Dorf, das ein Geheimnis birgt, das nur die Neugierigsten lÃ¼ften kÃ¶nnen... wagst du es?",
        slide2: "Gonzalo de la Sierra, ein Winzer aus dem 16. Jahrhundert, verschwand spurlos. Doch er hinterlieÃŸ eine Nachricht, versteckt in den Winkeln des Dorfes. Finde die Fragmente, folge den Spuren und lÃ¼fte das RÃ¤tsel.",
        slide3: "Besuche jede Station, lÃ¶se die Aufgaben, scanne den QR-Code... und enthÃ¼lle das verborgene Geheimnis.",
        como: "ğŸ§¾ Wie funktioniert das Spiel?",
        lista: [
          "Aktiviere GPS und mobile Daten und erkunde das Dorf. Kein Download erforderlich!",
          "Besuche die 6 Stationen und lÃ¶se die Herausforderungen an jedem Ort.",
          "Scanne den QR-Code an jedem Ort, um ein Nachrichtenfragment zu entdecken.",
          "Nur wenn du alle Stationen abschlieÃŸt, wird der letzte Ort freigeschaltet und du kannst das RÃ¤tsel um Gonzalos Verschwinden lÃ¶sen."
        ],
        info: "ğŸ® Dieses Spiel ist <strong>kostenlos</strong> und als unterhaltsamer Weg gedacht, dieses historische Dorf zu entdecken.<br><br>ğŸ’¡ Es handelt sich um eine <strong>private Initiative</strong> ohne Ã¶ffentliche Finanzierung, die von lokalen Unternehmern zur Verbesserung des Besuchererlebnisses entwickelt wurde.",
        antes: "ğŸ“ Bevor du beginnst...",
        introduce: "Gib deinen Namen oder Spitznamen ein, um deinen Fortschritt zu speichern:",
        btnGuardar: "Speichern und Starten",
        btnExplorar: "ğŸ—ºï¸ Erforschen",
        btnGuia: "ğŸ“– Historischer FÃ¼hrer",
        btnCronica: "ğŸ“œ Chronik",
        btnRanking: "ğŸ† Bestenliste"
      }
    };

    function aplicarIdioma() {
    const idioma = localStorage.getItem("idioma") || "es";
    const t = textos[idioma];
    document.getElementById("titulo").innerText = t.titulo;
    document.getElementById("slide1").innerText = t.slide1;
    document.getElementById("slide2").innerText = t.slide2;
    document.getElementById("slide3").innerText = t.slide3;
    document.getElementById("como").innerText = t.como;
    const lista = document.getElementById("lista-como");
    lista.innerHTML = "";
    t.lista.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item;
      lista.appendChild(li);
    });
    document.getElementById("info-extra").innerHTML = t.info;
    document.getElementById("antes").innerText = t.antes;
    document.getElementById("introduce").innerText = t.introduce;
    document.getElementById("btnGuardar").innerText = t.btnGuardar;
    document.querySelector(".button-group button:nth-child(1)").innerText = t.btnExplorar;
    document.querySelector(".button-group button:nth-child(2)").innerText = t.btnGuia;
    document.querySelector(".button-group button:nth-child(3)").innerText = t.btnCronica;
    document.querySelector(".button-group button:nth-child(4)").innerText = t.btnRanking;
  }

  function guardarNombreJugador() {
    const nombre = document.getElementById("nombre-input").value.trim();
    if (nombre.length >= 3) {
      localStorage.setItem("jugador", nombre);
      document.getElementById("nombre-jugador").style.display = "none";
      gtag('event', 'jugador_inicio', {
        'event_category': 'Juego',
        'event_label': nombre
      });
    } else {
      alert("Por favor, escribe al menos 3 caracteres.");
    }
  }

  function toggleMusic() {
    const music = document.getElementById("background-music");
    const btn = document.querySelector(".music-btn");
    if (music.paused) {
      music.play();
      btn.innerText = "ğŸµ Pausar MÃºsica";
    } else {
      music.pause();
      btn.innerText = "ğŸµ Reanudar MÃºsica";
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    aplicarIdioma();
    if (localStorage.getItem("jugador")) {
      document.getElementById("nombre-jugador").style.display = "none";
    }

    // Cambio de idioma en tiempo real
    document.getElementById("selector-idioma").addEventListener("change", (e) => {
      localStorage.setItem("idioma", e.target.value);
      aplicarIdioma();
    });
  });
</script>
  
</body>
</html>
